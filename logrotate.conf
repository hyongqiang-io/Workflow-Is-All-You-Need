# Logrotate配置 - 管理应用日志文件
/var/log/workflow/*.log {
    daily
    missingok
    rotate 30
    compress
    delaycompress
    notifempty
    create 644 ubuntu ubuntu
    postrotate
        # 重新加载服务以使用新日志文件
        systemctl reload workflow-backend.service >/dev/null 2>&1 || true
    endscript
}

# systemd journal 日志配置
/var/log/journal/*/*.journal {
    weekly
    missingok
    rotate 4
    compress
    delaycompress
    notifempty
}